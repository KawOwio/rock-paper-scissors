<!DOCTYPE html>
<html>
    <title>Rock Paper Scissors!</title>
    <meta charset="utf-8">
</html>
<body>
    <script>
        //0 == Rock
        //1 == Paper
        //2 == Scissors

        function computerPlay()
        {
            var rng = Math.floor(Math.random() * Math.floor(3));
            return rng;
        }

        function playerPlay()
        {
            var decided = false;
            while (decided == false)
            {
                var playerChoice = prompt("What do you want to play?", "rock/paper/scissors");
                playerChoice.toLowerCase();
                switch (playerChoice)
                {
                    case 'rock':
                        return 0;
                    case 'paper':
                        return 1;
                    case 'scissors':
                        return 2;
                    default:
                        decided = false;
                }
            }
            
        }

        function playRound(playerSelection, computerSelection)
        {
            if (playerSelection == 0)
            {
                if(computerSelection == 0)
                {
                    console.log("You tied!");
                    return 2;
                }
                else if(computerSelection == 1)
                {
                    console.log("You Lose! Paper beats Rock!");
                    return 0;
                }
                else
                {
                    console.log("You Win! Rock beats Scissors!");
                    return 1;
                }

            }
            else if(playerSelection == 1)
            {
                if(computerSelection == 0)
                {
                    console.log("You Win! Paper beats Rock!");
                    return 1;
                }
                else if(computerSelection == 1)
                {
                    console.log("You tied!")
                    return 2;
                }
                else
                {
                    console.log("You Lose! Scissors beats Paper!")
                    return 0;
                }
            }
            else 
            {
                if(computerSelection == 0)
                {
                    console.log("You Lose! Rock beats Scissors!")
                    return 0;
                }
                else if(computerSelection == 1)
                {
                    console.log("You Win! Scissors beats Paper!")
                    return 1;
                }
                else
                {
                    console.log("You tied!")
                    return 2;
                }
            }
        }

        function game()
        {
            var computerScore = 0;
            var playerScore = 0;
            var i;
            for (i = 0; i < 5; i++)
            {
                var computerSelection = computerPlay();
                console.log("CPU: ", computerSelection);
                var playerSelection = playerPlay();
                console.log("P: ", playerSelection);

                var rtn = playRound(playerSelection, computerSelection);
                console.log("rtn: ", rtn);
                if (rtn == 0)
                {
                    computerScore++;
                }
                else if (rtn == 1)
                {
                    playerScore++;
                }
                else
                {
                    i--;
                }
                console.log(i);
                console.log("Player score: ", playerScore);
                console.log("Computer score: ", computerScore);
            }
            if(playerScore > computerScore)
            {
                return "You won";
            }
            else if (playerScore < computerScore)
            {
                return "Computer won";
            }
            else
            {
                return "something went wrong";
            }
        }

        var winner = game();
        console.log(winner);


    </script>
</body>